<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N0rb1n - Share Your Pastes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Base styles and variables */
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --accent-primary: #7e22ce;
            --accent-secondary: #a855f7;
            --accent-tertiary: #581c87;
            --online-dot: #22c55e;
            --success: #4ade80;
            --error: #f87171;
            --warning: #fbbf24;
            --rainbow: linear-gradient(
                90deg,
                rgba(255, 0, 0, 0.7) 0%,
                rgba(255, 154, 0, 0.7) 10%,
                rgba(208, 222, 33, 0.7) 20%,
                rgba(79, 220, 74, 0.7) 30%,
                rgba(63, 218, 216, 0.7) 40%,
                rgba(47, 201, 226, 0.7) 50%,
                rgba(28, 127, 238, 0.7) 60%,
                rgba(95, 21, 242, 0.7) 70%,
                rgba(186, 12, 248, 0.7) 80%,
                rgba(251, 7, 217, 0.7) 90%,
                rgba(255, 0, 0, 0.7) 100%
            );
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(46, 16, 101, 0.4) 0%, transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(46, 16, 101, 0.4) 0%, transparent 25%),
                radial-gradient(circle at 50% 80%, rgba(46, 16, 101, 0.4) 0%, transparent 25%);
        }

        /* Header and logo styles */
        header {
            background-color: var(--bg-secondary);
            padding: 1rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 100;
            border-bottom: 1px solid var(--accent-primary);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            font-size: 2.2rem;
            font-weight: bold;
            background: var(--rainbow);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.5),
                         0 0 25px rgba(126, 34, 206, 0.6);
            animation: glow 3s infinite alternate;
            letter-spacing: 1px;
        }

        @keyframes glow {
            from {
                text-shadow: 0 0 15px rgba(255, 255, 255, 0.5),
                             0 0 25px rgba(126, 34, 206, 0.6);
            }
            to {
                text-shadow: 0 0 20px rgba(255, 255, 255, 0.6),
                             0 0 30px rgba(126, 34, 206, 0.7),
                             0 0 40px rgba(126, 34, 206, 0.4);
            }
        }

        .online-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(126, 34, 206, 0.2);
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid var(--accent-primary);
        }

        .online-dot {
            width: 10px;
            height: 10px;
            background-color: var(--online-dot);
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* Menu button */
        .menu-btn {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.8rem;
            cursor: pointer;
            padding: 0.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: transform 0.3s;
            background: rgba(126, 34, 206, 0.2);
            border-radius: 8px;
            border: 1px solid var(--accent-primary);
        }

        .menu-btn:hover {
            transform: scale(1.05);
            background: rgba(126, 34, 206, 0.3);
        }

        .menu-line {
            width: 25px;
            height: 3px;
            background-color: var(--text-primary);
            margin: 3px 0;
            border-radius: 2px;
            transition: all 0.3s;
        }

        /* Navigation menu */
        .nav-menu {
            position: fixed;
            top: -100%;
            left: 0;
            width: 100%;
            background-color: var(--bg-tertiary);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            z-index: 99;
            transition: top 0.5s ease-out;
            border-radius: 0 0 20px 20px;
            overflow: hidden;
            border-left: 1px solid var(--accent-primary);
            border-right: 1px solid var(--accent-primary);
            border-bottom: 1px solid var(--accent-primary);
        }

        .nav-menu.active {
            top: 80px;
        }

        .nav-menu ul {
            list-style: none;
            padding: 1.5rem;
        }

        .nav-menu li {
            margin-bottom: 0.8rem;
        }

        .nav-menu a {
            color: var(--text-primary);
            text-decoration: none;
            font-size: 1.2rem;
            display: block;
            padding: 0.8rem 1rem;
            border-radius: 8px;
            transition: all 0.3s;
            background: rgba(126, 34, 206, 0.1);
            border: 1px solid transparent;
        }

        .nav-menu a:hover {
            background: rgba(126, 34, 206, 0.3);
            border: 1px solid var(--accent-primary);
            transform: translateX(5px);
        }

        /* Main content */
        main {
            flex: 1;
            padding: 2rem 1rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .category {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .category.active {
            display: block;
        }

        /* Search bar */
        .search-container {
            margin: 2rem 0;
        }

        .search-bar {
            display: flex;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border-radius: 50px;
            overflow: hidden;
            border: 1px solid var(--accent-primary);
        }

        .search-input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: none;
            font-size: 1rem;
            background-color: rgba(15, 23, 42, 0.7);
            color: var(--text-primary);
            backdrop-filter: blur(5px);
        }

        .search-input::placeholder {
            color: var(--text-secondary);
        }

        .search-button {
            padding: 1rem 1.8rem;
            border: none;
            background: var(--accent-primary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-button:hover {
            background: var(--accent-secondary);
        }

        /* Section titles */
        h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            text-align: center;
            color: var(--text-primary);
            text-shadow: 0 0 10px rgba(126, 34, 206, 0.5);
            position: relative;
            padding-bottom: 0.5rem;
        }

        h2:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: var(--rainbow);
            border-radius: 3px;
        }

        /* Paste cards */
        .pastes-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .paste-card {
            background: linear-gradient(145deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
            border: 1px solid rgba(126, 34, 206, 0.3);
            position: relative;
            overflow: hidden;
        }

        .paste-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--rainbow);
        }

        .paste-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.4);
            border: 1px solid var(--accent-primary);
        }

        .paste-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
            word-break: break-word;
            font-weight: 600;
        }

        .paste-content {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            max-height: 150px;
            overflow: hidden;
            position: relative;
            line-height: 1.5;
        }

        .paste-content:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background: linear-gradient(to bottom, transparent, var(--bg-secondary));
        }

        .paste-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--text-secondary);
            border-top: 1px solid rgba(126, 34, 206, 0.3);
            padding-top: 0.8rem;
        }

        /* Forms */
        .form-container {
            max-width: 600px;
            margin: 0 auto;
            background: linear-gradient(145deg, var(--bg-secondary), var(--bg-tertiary));
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(126, 34, 206, 0.3);
        }

        .form-title {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.8rem;
            color: var(--text-primary);
            text-shadow: 0 0 10px rgba(126, 34, 206, 0.5);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 1rem;
            border: 1px solid rgba(126, 34, 206, 0.3);
            border-radius: 8px;
            background-color: rgba(15, 23, 42, 0.6);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border: 1px solid var(--accent-primary);
            box-shadow: 0 0 10px rgba(126, 34, 206, 0.5);
        }

        .form-textarea {
            min-height: 200px;
            resize: vertical;
        }

        .form-buttons {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1.5rem;
        }

        .btn {
            padding: 0.8rem 1.8rem;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .btn-primary {
            background: var(--accent-primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-secondary);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: 1px solid rgba(126, 34, 206, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Friends list */
        .friends-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .friend-card {
            background: linear-gradient(145deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: 12px;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(126, 34, 206, 0.3);
            transition: all 0.3s;
        }

        .friend-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.4);
            border: 1px solid var(--accent-primary);
        }

        .friend-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--accent-primary);
        }

        .friend-name {
            font-weight: 500;
            flex: 1;
        }

        /* Chat interface */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 500px;
            background: linear-gradient(145deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid rgba(126, 34, 206, 0.3);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .chat-header {
            padding: 1rem;
            background: rgba(126, 34, 206, 0.2);
            display: flex;
            align-items: center;
            gap: 1rem;
            border-bottom: 1px solid rgba(126, 34, 206, 0.3);
        }

        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            background: rgba(15, 23, 42, 0.4);
        }

        .message {
            max-width: 80%;
            padding: 0.8rem 1.2rem;
            border-radius: 18px;
            line-height: 1.4;
            word-break: break-word;
        }

        .message.received {
            align-self: flex-start;
            background: rgba(126, 34, 206, 0.2);
            border: 1px solid rgba(126, 34, 206, 0.3);
        }

        .message.sent {
            align-self: flex-end;
            background: var(--accent-primary);
            color: white;
        }

        .chat-input {
            display: flex;
            padding: 1rem;
            background: rgba(126, 34, 206, 0.2);
            border-top: 1px solid rgba(126, 34, 206, 0.3);
        }

        .chat-input input {
            flex: 1;
            padding: 0.8rem 1.2rem;
            border: none;
            border-radius: 50px;
            background: rgba(15, 23, 42, 0.6);
            color: var(--text-primary);
            border: 1px solid rgba(126, 34, 206, 0.3);
        }

        .chat-input input:focus {
            outline: none;
            border: 1px solid var(--accent-primary);
        }

        .chat-input button {
            margin-left: 1rem;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 50px;
            background: var(--accent-primary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .chat-input button:hover {
            background: var(--accent-secondary);
        }

        /* Notifications */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transform: translateY(100px);
            opacity: 0;
            transition: transform 0.3s, opacity 0.3s;
            z-index: 1000;
            border-left: 4px solid var(--success);
            display: flex;
            align-items: center;
            gap: 0.8rem;
            border: 1px solid rgba(126, 34, 206, 0.3);
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .notification.error {
            border-left: 4px solid var(--error);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .logo {
                font-size: 1.8rem;
            }
            
            .pastes-container,
            .friends-container {
                grid-template-columns: 1fr;
            }
            
            .form-container {
                padding: 1.5rem;
            }
            
            .form-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .search-bar {
                flex-direction: column;
                border-radius: 12px;
            }
            
            .search-input {
                border-radius: 12px 12px 0 0;
            }
            
            .search-button {
                border-radius: 0 0 12px 12px;
            }
            
            .chat-container {
                height: 400px;
            }
            
            h2 {
                font-size: 1.8rem;
            }
            
            .header-content {
                flex-wrap: wrap;
                gap: 1rem;
            }
            
            .logo-container {
                order: 1;
                flex: 1;
            }
            
            .menu-btn {
                order: 2;
            }
            
            .online-indicator {
                order: 3;
                flex-basis: 100%;
                justify-content: center;
                margin-top: 0.5rem;
            }
            
            .nav-menu.active {
                top: 130px;
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.5);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-secondary);
        }

        /* Selection color */
        ::selection {
            background: var(--accent-primary);
            color: white;
        }

        /* Focus outline removal for buttons */
        button:focus {
            outline: none;
        }

        /* Animation for friend requests and messages */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .friend-card,
        .message {
            animation: slideIn 0.3s ease;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo-container">
                <div class="logo">N0rb1n</div>
            </div>
            
            <div class="online-indicator">
                <div class="online-dot"></div>
                <span id="online-count">0</span> online
            </div>
            
            <button class="menu-btn" id="menu-btn">
                <div class="menu-line"></div>
                <div class="menu-line"></div>
                <div class="menu-line"></div>
            </button>
        </div>
        
        <nav class="nav-menu" id="nav-menu">
            <ul>
                <li><a href="#" class="nav-link" data-category="home"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="#" class="nav-link" data-category="recent"><i class="fas fa-history"></i> Recent Pastes</a></li>
                <li><a href="#" class="nav-link" data-category="autism"><i class="fas fa-crown"></i> Hall of Autism</a></li>
                <li><a href="#" class="nav-link" data-category="paste"><i class="fas fa-plus"></i> Create Paste</a></li>
                <li id="signin-nav-item"><a href="#" class="nav-link" data-category="signin"><i class="fas fa-user-plus"></i> Sign In</a></li>
                <li id="login-nav-item"><a href="#" class="nav-link" data-category="login"><i class="fas fa-sign-in-alt"></i> Log In</a></li>
                <li id="account-nav-item" style="display: none;"><a href="#" class="nav-link" data-category="account"><i class="fas fa-user"></i> My Account</a></li>
                <li id="friends-nav-item" style="display: none;"><a href="#" class="nav-link" data-category="friends"><i class="fas fa-users"></i> Friends</a></li>
                <li id="logout-nav-item" style="display: none;"><a href="#" id="logout-link"><i class="fas fa-sign-out-alt"></i> Log Out</a></li>
            </ul>
        </nav>
    </header>
    
    <main>
        <!-- Home Category -->
        <section id="home" class="category active">
            <div class="search-container">
                <div class="search-bar">
                    <input type="text" class="search-input" id="search-input" placeholder="Search titles and pastes...">
                    <button class="search-button" id="search-button"><i class="fas fa-search"></i> Search</button>
                </div>
            </div>
            
            <h2>Popular Pastes</h2>
            <div class="pastes-container" id="home-pastes">
                <!-- Paste cards will be dynamically inserted here -->
            </div>
        </section>
        
        <!-- Recent Pastes Category -->
        <section id="recent" class="category">
            <h2>Recently Created Pastes</h2>
            <div class="pastes-container" id="recent-pastes">
                <!-- Recent paste cards will be dynamically inserted here -->
            </div>
        </section>
        
        <!-- Hall of Autism Category -->
        <section id="autism" class="category">
            <h2>Hall of Autism</h2>
            <p style="text-align: center; margin-bottom: 2rem; color: var(--text-secondary);">Pastes that have been mentioned at least 3 times</p>
            <div class="pastes-container" id="autism-pastes">
                <!-- Hall of autism paste cards will be dynamically inserted here -->
            </div>
        </section>
        
        <!-- Create Paste Category -->
        <section id="paste" class="category">
            <div class="form-container">
                <h2 class="form-title">Create a New Paste</h2>
                <form id="paste-form">
                    <div class="form-group">
                        <label for="paste-title" class="form-label">Title</label>
                        <input type="text" id="paste-title" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="paste-content" class="form-label">Content</label>
                        <textarea id="paste-content" class="form-textarea" placeholder="Write your paste here... (no limit)" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="paste-image" class="form-label">Image (optional)</label>
                        <input type="file" id="paste-image" class="form-input" accept="image/*">
                        <small style="display: block; margin-top: 0.5rem; color: var(--text-secondary);">Or enter image URL:</small>
                        <input type="url" id="paste-image-url" class="form-input" placeholder="https://example.com/image.jpg" style="margin-top: 0.5rem;">
                    </div>
                    
                    <div class="form-buttons">
                        <button type="button" id="clear-paste" class="btn btn-secondary"><i class="fas fa-eraser"></i> Clear</button>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-paper-plane"></i> Publish</button>
                    </div>
                </form>
            </div>
            
            <div class="notification" id="paste-notification">
                <i class="fas fa-check-circle"></i> Paste published successfully!
            </div>
        </section>
        
        <!-- Sign In Category -->
        <section id="signin" class="category">
            <div class="form-container">
                <h2 class="form-title">Create Account</h2>
                <form id="signin-form">
                    <div class="form-group">
                        <label for="signin-username" class="form-label">Username</label>
                        <input type="text" id="signin-username" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="signin-password" class="form-label">Password</label>
                        <input type="password" id="signin-password" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="signin-avatar" class="form-label">Profile Picture (optional)</label>
                        <input type="file" id="signin-avatar" class="form-input" accept="image/*">
                        <small style="display: block; margin-top: 0.5rem; color: var(--text-secondary);">Or enter image URL:</small>
                        <input type="url" id="signin-avatar-url" class="form-input" placeholder="https://example.com/avatar.jpg" style="margin-top: 0.5rem;">
                    </div>
                    
                    <div id="signin-error" class="form-group" style="color: var(--error); display: none;">
                        <i class="fas fa-exclamation-circle"></i> Account already exists with this username.
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%;"><i class="fas fa-user-plus"></i> Sign Up</button>
                </form>
            </div>
        </section>
        
        <!-- Log In Category -->
        <section id="login" class="category">
            <div class="form-container">
                <h2 class="form-title">Log In to Your Account</h2>
                <form id="login-form">
                    <div class="form-group">
                        <label for="login-username" class="form-label">Username</label>
                        <input type="text" id="login-username" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password" class="form-label">Password</label>
                        <input type="password" id="login-password" class="form-input" required>
                    </div>
                    
                    <div id="login-error" class="form-group" style="color: var(--error); display: none;">
                        <i class="fas fa-exclamation-circle"></i> Incorrect username or password.
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%;"><i class="fas fa-sign-in-alt"></i> Log In</button>
                </form>
            </div>
        </section>
        
        <!-- My Account Category -->
        <section id="account" class="category">
            <div class="form-container">
                <h2 class="form-title">My Account</h2>
                
                <div class="form-group" style="text-align: center;">
                    <img id="account-avatar" src="" alt="Avatar" class="friend-avatar" style="width: 100px; height: 100px; margin: 0 auto 1rem;">
                    <h3 id="account-username"></h3>
                </div>
                
                <div class="form-buttons">
                    <button id="logout-button" class="btn btn-primary"><i class="fas fa-sign-out-alt"></i> Log Out</button>
                </div>
            </div>
        </section>
        
        <!-- Friends Category -->
        <section id="friends" class="category">
            <h2>Friends</h2>
            
            <div class="form-container" style="margin-bottom: 2rem;">
                <h3 style="margin-bottom: 1rem; text-align: center;">Add Friend</h3>
                <div style="display: flex; gap: 1rem;">
                    <input type="text" id="add-friend-input" class="form-input" placeholder="Enter username">
                    <button id="add-friend-btn" class="btn btn-primary"><i class="fas fa-user-plus"></i> Send Request</button>
                </div>
            </div>
            
            <div style="display: flex; gap: 2rem; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 300px;">
                    <h3 style="margin-bottom: 1rem; text-align: center;">Friend Requests</h3>
                    <div class="friends-container" id="friend-requests">
                        <!-- Friend requests will be dynamically inserted here -->
                    </div>
                </div>
                
                <div style="flex: 1; min-width: 300px;">
                    <h3 style="margin-bottom: 1rem; text-align: center;">Friends List</h3>
                    <div class="friends-container" id="friends-list">
                        <!-- Friends will be dynamically inserted here -->
                    </div>
                </div>
            </div>
            
            <!-- Chat Modal (hidden by default) -->
            <div id="chat-modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 600px; height: 80vh; max-height: 600px; z-index: 1000; background: var(--bg-secondary); border-radius: 15px; overflow: hidden; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5); border: 1px solid var(--accent-primary);">
                <div class="chat-container" style="height: 100%;">
                    <div class="chat-header">
                        <img id="chat-friend-avatar" src="" alt="Avatar" class="friend-avatar">
                        <span id="chat-friend-name">Friend</span>
                        <button id="close-chat" style="margin-left: auto; background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">Ã—</button>
                    </div>
                    <div class="chat-messages" id="chat-messages">
                        <!-- Messages will be inserted here -->
                    </div>
                    <div class="chat-input">
                        <input type="text" id="chat-input" placeholder="Type a message...">
                        <button id="send-message"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Data storage
        let users = JSON.parse(localStorage.getItem('n0rb1n_users')) || [];
        let pastes = JSON.parse(localStorage.getItem('n0rb1n_pastes')) || [];
        let currentUser = JSON.parse(localStorage.getItem('n0rb1n_currentUser')) || null;
        let onlineCount = Math.floor(Math.random() * 100) + 50; // Random online count for demo

        // DOM Elements
        const menuBtn = document.getElementById('menu-btn');
        const navMenu = document.getElementById('nav-menu');
        const navLinks = document.querySelectorAll('.nav-link');
        const categories = document.querySelectorAll('.category');
        const onlineCountElement = document.getElementById('online-count');
        const pasteForm = document.getElementById('paste-form');
        const clearPasteBtn = document.getElementById('clear-paste');
        const pasteNotification = document.getElementById('paste-notification');
        const signinForm = document.getElementById('signin-form');
        const signinError = document.getElementById('signin-error');
        const loginForm = document.getElementById('login-form');
        const loginError = document.getElementById('login-error');
        const accountUsername = document.getElementById('account-username');
        const accountAvatar = document.getElementById('account-avatar');
        const logoutButton = document.getElementById('logout-button');
        const addFriendBtn = document.getElementById('add-friend-btn');
        const addFriendInput = document.getElementById('add-friend-input');
        const friendRequestsContainer = document.getElementById('friend-requests');
        const friendsListContainer = document.getElementById('friends-list');
        const chatModal = document.getElementById('chat-modal');
        const closeChatBtn = document.getElementById('close-chat');
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const sendMessageBtn = document.getElementById('send-message');
        const chatFriendName = document.getElementById('chat-friend-name');
        const chatFriendAvatar = document.getElementById('chat-friend-avatar');
        const searchInput = document.getElementById('search-input');
        const searchButton = document.getElementById('search-button');

        // Set initial online count
        onlineCountElement.textContent = onlineCount;

        // Initialize the page
        function init() {
            updateNavigation();
            loadPastes();
            
            // If no pastes exist, create some sample data
            if (pastes.length === 0) {
                createSampleData();
            }
            
            // Simulate online users count changes
            setInterval(() => {
                onlineCount += Math.floor(Math.random() * 5) - 2;
                if (onlineCount < 0) onlineCount = 0;
                onlineCountElement.textContent = onlineCount;
            }, 10000);
        }

        // Create sample pastes for demo
        function createSampleData() {
            const samplePastes = [
                {
                    id: Date.now(),
                    title: 'Welcome to N0rb1n!',
                    content: 'This is a sample paste to demonstrate the functionality of our website. You can create your own pastes with unlimited text and optional images.',
                    author: 'system',
                    createdAt: new Date().toISOString(),
                    mentions: 5,
                    imageUrl: ''
                },
                {
                    id: Date.now() + 1,
                    title: 'How to use this site',
                    content: '1. Create an account or log in\n2. Click on "Create Paste" to make your own paste\n3. Explore recent pastes and the Hall of Autism\n4. Add friends and chat with them',
                    author: 'system',
                    createdAt: new Date().toISOString(),
                    mentions: 3,
                    imageUrl: ''
                },
                {
                    id: Date.now() + 2,
                    title: 'The meaning of life',
                    content: 'According to all known laws of aviation, there is no way a bee should be able to fly. Its wings are too small to get its fat little body off the ground. The bee, of course, flies anyway because bees don\'t care what humans think is impossible.',
                    author: 'system',
                    createdAt: new Date().toISOString(),
                    mentions: 7,
                    imageUrl: ''
                }
            ];
            
            pastes = samplePastes;
            localStorage.setItem('n0rb1n_pastes', JSON.stringify(pastes));
            loadPastes();
        }

        // Update navigation based on login status
        function updateNavigation() {
            const signinNavItem = document.getElementById('signin-nav-item');
            const loginNavItem = document.getElementById('login-nav-item');
            const accountNavItem = document.getElementById('account-nav-item');
            const friendsNavItem = document.getElementById('friends-nav-item');
            const logoutNavItem = document.getElementById('logout-nav-item');
            
            if (currentUser) {
                signinNavItem.style.display = 'none';
                loginNavItem.style.display = 'none';
                accountNavItem.style.display = 'block';
                friendsNavItem.style.display = 'block';
                logoutNavItem.style.display = 'block';
                
                // Update account info
                accountUsername.textContent = currentUser.username;
                accountAvatar.src = currentUser.avatar || 'https://via.placeholder.com/100?text=No+Image';
            } else {
                signinNavItem.style.display = 'block';
                loginNavItem.style.display = 'block';
                accountNavItem.style.display = 'none';
                friendsNavItem.style.display = 'none';
                logoutNavItem.style.display = 'none';
            }
        }

        // Load pastes into the respective sections
        function loadPastes() {
            const homePastesContainer = document.getElementById('home-pastes');
            const recentPastesContainer = document.getElementById('recent-pastes');
            const autismPastesContainer = document.getElementById('autism-pastes');
            
            // Clear containers
            homePastesContainer.innerHTML = '';
            recentPastesContainer.innerHTML = '';
            autismPastesContainer.innerHTML = '';
            
            // Sort pastes by date (newest first)
            const sortedPastes = [...pastes].sort((a, b) => 
                new Date(b.createdAt) - new Date(a.createdAt)
            );
            
            // Display pastes in home (show 6 most recent)
            sortedPastes.slice(0, 6).forEach(paste => {
                homePastesContainer.appendChild(createPasteCard(paste));
            });
            
            // Display all pastes in recent
            sortedPastes.forEach(paste => {
                recentPastesContainer.appendChild(createPasteCard(paste));
            });
            
            // Display pastes in Hall of Autism (mentions >= 3)
            const autismPastes = pastes.filter(paste => paste.mentions >= 3);
            autismPastes.forEach(paste => {
                autismPastesContainer.appendChild(createPasteCard(paste));
            });
        }

        // Create a paste card element
        function createPasteCard(paste) {
            const card = document.createElement('div');
            card.className = 'paste-card';
            
            // Format date
            const date = new Date(paste.createdAt).toLocaleDateString();
            
            let content = paste.content;
            if (content.length > 150) {
                content = content.substring(0, 150) + '...';
            }
            
            card.innerHTML = `
                <h3 class="paste-title">${escapeHtml(paste.title)}</h3>
                <div class="paste-content">${escapeHtml(content)}</div>
                ${paste.imageUrl ? `<img src="${paste.imageUrl}" alt="Paste image" style="max-width: 100%; border-radius: 8px; margin-bottom: 1rem;">` : ''}
                <div class="paste-meta">
                    <span>By ${escapeHtml(paste.author)}</span>
                    <span>${date}</span>
                </div>
                <div class="paste-meta">
                    <span>Mentions: ${paste.mentions || 0}</span>
                </div>
            `;
            
            return card;
        }

        // Utility function to escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Show a notification
        function showNotification(element, isError = false) {
            if (isError) {
                element.classList.add('error');
            } else {
                element.classList.remove('error');
            }
            
            element.classList.add('show');
            setTimeout(() => {
                element.classList.remove('show');
            }, 3000);
        }

        // Event Listeners
        menuBtn.addEventListener('click', () => {
            navMenu.classList.toggle('active');
        });

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const category = link.getAttribute('data-category');
                
                // Hide all categories
                categories.forEach(cat => cat.classList.remove('active'));
                
                // Show selected category
                document.getElementById(category).classList.add('active');
                
                // Close menu
                navMenu.classList.remove('active');
                
                // If going to friends category, load friends
                if (category === 'friends' && currentUser) {
                    loadFriends();
                }
            });
        });

        // Logout link
        document.getElementById('logout-link').addEventListener('click', (e) => {
            e.preventDefault();
            logout();
        });

        // Paste form submission
        pasteForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            if (!currentUser) {
                alert('You need to be logged in to create a paste');
                showCategory('login');
                return;
            }
            
            const title = document.getElementById('paste-title').value;
            const content = document.getElementById('paste-content').value;
            const imageUrl = document.getElementById('paste-image-url').value;
            
            const newPaste = {
                id: Date.now(),
                title,
                content,
                author: currentUser.username,
                createdAt: new Date().toISOString(),
                mentions: 0,
                imageUrl: imageUrl || ''
            };
            
            pastes.push(newPaste);
            localStorage.setItem('n0rb1n_pastes', JSON.stringify(pastes));
            
            // Clear form
            pasteForm.reset();
            
            // Show notification
            showNotification(pasteNotification);
            
            // Reload pastes
            loadPastes();
        });

        // Clear paste button
        clearPasteBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear the paste?')) {
                pasteForm.reset();
            }
        });

        // Sign in form submission
        signinForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const username = document.getElementById('signin-username').value;
            const password = document.getElementById('signin-password').value;
            const avatarUrl = document.getElementById('signin-avatar-url').value;
            
            // Check if username already exists
            if (users.find(user => user.username === username)) {
                signinError.style.display = 'block';
                return;
            }
            
            // Create new user
            const newUser = {
                username,
                password, // Note: In a real app, you would hash the password
                avatar: avatarUrl || '',
                friends: [],
                friendRequests: []
            };
            
            users.push(newUser);
            localStorage.setItem('n0rb1n_users', JSON.stringify(users));
            
            // Log the user in
            currentUser = newUser;
            localStorage.setItem('n0rb1n_currentUser', JSON.stringify(currentUser));
            
            // Update navigation
            updateNavigation();
            
            // Clear form and hide error
            signinForm.reset();
            signinError.style.display = 'none';
            
            // Show account page
            showCategory('account');
        });

        // Log in form submission
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            
            // Find user
            const user = users.find(u => u.username === username && u.password === password);
            
            if (!user) {
                loginError.style.display = 'block';
                return;
            }
            
            // Log the user in
            currentUser = user;
            localStorage.setItem('n0rb1n_currentUser', JSON.stringify(currentUser));
            
            // Update navigation
            updateNavigation();
            
            // Clear form and hide error
            loginForm.reset();
            loginError.style.display = 'none';
            
            // Show account page
            showCategory('account');
        });

        // Logout button
        logoutButton.addEventListener('click', () => {
            logout();
        });

        // Add friend button
        addFriendBtn.addEventListener('click', () => {
            if (!currentUser) {
                alert('You need to be logged in to add friends');
                showCategory('login');
                return;
            }
            
            const friendUsername = addFriendInput.value.trim();
            
            if (!friendUsername) {
                alert('Please enter a username');
                return;
            }
            
            if (friendUsername === currentUser.username) {
                alert('You cannot add yourself as a friend');
                return;
            }
            
            // Find user to add
            const userToAdd = users.find(user => user.username === friendUsername);
            
            if (!userToAdd) {
                alert('User not found');
                return;
            }
            
            // Check if already friends or request already sent
            if (currentUser.friends.includes(friendUsername)) {
                alert('This user is already your friend');
                return;
            }
            
            if (userToAdd.friendRequests && userToAdd.friendRequests.includes(currentUser.username)) {
                alert('Friend request already sent');
                return;
            }
            
            // Add friend request to target user
            if (!userToAdd.friendRequests) userToAdd.friendRequests = [];
            userToAdd.friendRequests.push(currentUser.username);
            
            // Update users in localStorage
            localStorage.setItem('n0rb1n_users', JSON.stringify(users));
            
            alert(`Friend request sent to ${friendUsername}`);
            addFriendInput.value = '';
            
            // Reload friends if we're on the friends page
            if (document.getElementById('friends').classList.contains('active')) {
                loadFriends();
            }
        });

        // Load friends and friend requests
        function loadFriends() {
            if (!currentUser) return;
            
            // Clear containers
            friendRequestsContainer.innerHTML = '';
            friendsListContainer.innerHTML = '';
            
            // Display friend requests
            if (currentUser.friendRequests && currentUser.friendRequests.length > 0) {
                currentUser.friendRequests.forEach(username => {
                    const requester = users.find(user => user.username === username);
                    if (requester) {
                        const requestElement = createFriendRequestElement(requester);
                        friendRequestsContainer.appendChild(requestElement);
                    }
                });
            } else {
                friendRequestsContainer.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">No friend requests</p>';
            }
            
            // Display friends
            if (currentUser.friends && currentUser.friends.length > 0) {
                currentUser.friends.forEach(username => {
                    const friend = users.find(user => user.username === username);
                    if (friend) {
                        const friendElement = createFriendElement(friend);
                        friendsListContainer.appendChild(friendElement);
                    }
                });
            } else {
                friendsListContainer.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">No friends yet</p>';
            }
        }

        // Create friend request element
        function createFriendRequestElement(user) {
            const element = document.createElement('div');
            element.className = 'friend-card';
            
            element.innerHTML = `
                <img src="${user.avatar || 'https://via.placeholder.com/50?text=No+Image'}" alt="Avatar" class="friend-avatar">
                <div class="friend-name">${escapeHtml(user.username)}</div>
                <div style="margin-left: auto; display: flex; gap: 0.5rem;">
                    <button class="btn btn-primary accept-request" data-username="${user.username}"><i class="fas fa-check"></i></button>
                    <button class="btn btn-secondary deny-request" data-username="${user.username}"><i class="fas fa-times"></i></button>
                </div>
            `;
            
            // Add event listeners to buttons
            element.querySelector('.accept-request').addEventListener('click', () => {
                acceptFriendRequest(user.username);
            });
            
            element.querySelector('.deny-request').addEventListener('click', () => {
                denyFriendRequest(user.username);
            });
            
            return element;
        }

        // Create friend element
        function createFriendElement(user) {
            const element = document.createElement('div');
            element.className = 'friend-card';
            
            element.innerHTML = `
                <img src="${user.avatar || 'https://via.placeholder.com/50?text=No+Image'}" alt="Avatar" class="friend-avatar">
                <div class="friend-name">${escapeHtml(user.username)}</div>
                <button class="btn btn-primary chat-with-friend" data-username="${user.username}" style="margin-left: auto;"><i class="fas fa-comment"></i></button>
            `;
            
            // Add event listener to chat button
            element.querySelector('.chat-with-friend').addEventListener('click', () => {
                openChat(user);
            });
            
            return element;
        }

        // Accept friend request
        function acceptFriendRequest(username) {
            // Add to current user's friends
            currentUser.friends.push(username);
            
            // Remove from current user's friend requests
            currentUser.friendRequests = currentUser.friendRequests.filter(req => req !== username);
            
            // Find the other user and add current user to their friends
            const otherUser = users.find(user => user.username === username);
            otherUser.friends.push(currentUser.username);
            
            // Update users in localStorage
            const currentUserIndex = users.findIndex(user => user.username === currentUser.username);
            users[currentUserIndex] = currentUser;
            
            const otherUserIndex = users.findIndex(user => user.username === username);
            users[otherUserIndex] = otherUser;
            
            localStorage.setItem('n0rb1n_users', JSON.stringify(users));
            localStorage.setItem('n0rb1n_currentUser', JSON.stringify(currentUser));
            
            // Reload friends
            loadFriends();
        }

        // Deny friend request
        function denyFriendRequest(username) {
            // Remove from current user's friend requests
            currentUser.friendRequests = currentUser.friendRequests.filter(req => req !== username);
            
            // Update users in localStorage
            const currentUserIndex = users.findIndex(user => user.username === currentUser.username);
            users[currentUserIndex] = currentUser;
            
            localStorage.setItem('n0rb1n_users', JSON.stringify(users));
            localStorage.setItem('n0rb1n_currentUser', JSON.stringify(currentUser));
            
            // Reload friends
            loadFriends();
        }

        // Open chat with friend
        function openChat(friend) {
            chatFriendName.textContent = friend.username;
            chatFriendAvatar.src = friend.avatar || 'https://via.placeholder.com/50?text=No+Image';
            
            // Load messages (in a real app, this would come from a server)
            chatMessages.innerHTML = '';
            const messages = [
                { sender: currentUser.username, text: `Hi ${friend.username}!`, time: new Date().toISOString() },
                { sender: friend.username, text: 'Hello! How are you?', time: new Date().toISOString() }
            ];
            
            messages.forEach(message => {
                addMessageToChat(message);
            });
            
            // Show chat modal
            chatModal.style.display = 'block';
        }

        // Add message to chat
        function addMessageToChat(message) {
            const messageElement = document.createElement('div');
            messageElement.className = `message ${message.sender === currentUser.username ? 'sent' : 'received'}`;
            
            messageElement.textContent = message.text;
            chatMessages.appendChild(messageElement);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Send message
        sendMessageBtn.addEventListener('click', () => {
            const messageText = chatInput.value.trim();
            
            if (messageText) {
                const message = {
                    sender: currentUser.username,
                    text: messageText,
                    time: new Date().toISOString()
                };
                
                addMessageToChat(message);
                chatInput.value = '';
            }
        });

        // Close chat
        closeChatBtn.addEventListener('click', () => {
            chatModal.style.display = 'none';
        });

        // Search functionality
        searchButton.addEventListener('click', performSearch);
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                performSearch();
            }
        });

        function performSearch() {
            const query = searchInput.value.toLowerCase().trim();
            
            if (!query) return;
            
            // Filter pastes by title or content
            const results = pastes.filter(paste => 
                paste.title.toLowerCase().includes(query) || 
                paste.content.toLowerCase().includes(query)
            );
            
            // Display results in home section
            const homePastesContainer = document.getElementById('home-pastes');
            homePastesContainer.innerHTML = '';
            
            if (results.length > 0) {
                results.forEach(paste => {
                    homePastesContainer.appendChild(createPasteCard(paste));
                });
            } else {
                homePastesContainer.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">No results found</p>';
            }
            
            // Show home category
            showCategory('home');
        }

        // Show a specific category
        function showCategory(categoryId) {
            categories.forEach(cat => cat.classList.remove('active'));
            document.getElementById(categoryId).classList.add('active');
        }

        // Logout function
        function logout() {
            currentUser = null;
            localStorage.removeItem('n0rb1n_currentUser');
            updateNavigation();
            showCategory('home');
        }

        // Initialize the app
        init();
    </script>
</body>
</html>
