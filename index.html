<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>N0rb1n</title>
<style>
    /* Moonlight Theme & Basic Styles */
    body {
        margin: 0;
        font-family: monospace;
        background-color: #0a0a1a;
        color: #fff;
        overflow-x: hidden;
    }
    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 20px;
        background: #111;
        position: relative;
        z-index: 10;
    }
    .logo {
        font-size: 24px;
        font-weight: bold;
        background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);
        -webkit-background-clip: text;
        color: transparent;
        animation: rainbow 3s linear infinite;
    }
    @keyframes rainbow {
        0% { background-position: 0%;}
        100% { background-position: 100%;}
    }
    .search-bar input {
        padding: 5px;
        font-size: 16px;
        border-radius: 5px;
        border: none;
    }
    .menu-btn {
        cursor: pointer;
        font-size: 24px;
    }
    nav {
        position: absolute;
        top: -1000px;
        left: 0;
        width: 100%;
        background: #111;
        flex-direction: column;
        align-items: center;
        transition: top 0.5s ease;
        z-index: 5;
    }
    nav.show {
        top: 60px;
    }
    nav a {
        display: block;
        padding: 10px;
        color: #fff;
        text-decoration: none;
        width: 100%;
        text-align: center;
        border-bottom: 1px solid #333;
    }
    nav a:hover { background: #222; }
    .content { padding: 20px; }
    .button { padding: 5px 10px; cursor: pointer; margin: 5px 0; }
    input, textarea { width: 100%; margin: 5px 0; padding: 5px; border-radius: 5px; border: none; }
    .red-dot {
        width: 10px;
        height: 10px;
        background: red;
        border-radius: 50%;
        display: inline-block;
        margin-left: 10px;
    }
</style>
</head>
<body>

<header>
    <div class="logo">N0rb1n</div>
    <div class="online-counter"><span class="red-dot"></span> <span id="online-count">0</span></div>
    <div class="search-bar">
        <input type="text" id="search-input" placeholder="Search pastes...">
    </div>
    <div class="menu-btn" onclick="toggleMenu()">â˜°</div>
</header>

<nav id="menu">
    <a href="#" onclick="showCategory('home')">Home</a>
    <a href="#" onclick="showCategory('recent')">Recent Pastes</a>
    <a href="#" onclick="showCategory('hall')">Hall of Autism</a>
    <a href="#" onclick="showCategory('paste')">Paste</a>
    <a href="#" id="signInMenu" href="#" onclick="showCategory('signIn')">Sign In</a>
    <a href="#" id="logInMenu" href="#" onclick="showCategory('logIn')">Log In</a>
    <a href="#" id="myAccountMenu" href="#" onclick="showCategory('myAccount')" style="display:none;">My Account</a>
</nav>

<div class="content" id="content">
    <!-- Dynamic content appears here -->
</div>

<script>
let currentUser = null;
let onlineUsers = 1; // For demonstration
document.getElementById('online-count').innerText = onlineUsers;

function toggleMenu() {
    document.getElementById('menu').classList.toggle('show');
}

function showCategory(category) {
    const content = document.getElementById('content');
    content.innerHTML = '';
    if(category === 'home') {
        const search = document.getElementById('search-input').value;
        const pastes = JSON.parse(localStorage.getItem('pastes')||'[]');
        const filtered = pastes.filter(p => p.title.toLowerCase().includes(search.toLowerCase()));
        content.innerHTML = '<h2>Search Results:</h2>';
        filtered.forEach(p => {
            content.innerHTML += `<div><h3>${p.title}</h3><p>${p.text}</p></div>`;
        });
    }
    if(category === 'paste') {
        content.innerHTML = `
            <h2>Create Paste</h2>
            <input id="paste-title" placeholder="Title">
            <textarea id="paste-text" rows="5" placeholder="Paste content"></textarea>
            <input id="paste-image" placeholder="Optional image URL">
            <button class="button" onclick="publishPaste()">Publish</button>
            <button class="button" onclick="clearPaste()">Clear</button>
            <p id="paste-msg"></p>
        `;
    }
    if(category === 'recent') {
        const pastes = JSON.parse(localStorage.getItem('pastes')||'[]');
        content.innerHTML = '<h2>Recent Pastes:</h2>';
        pastes.slice(-10).reverse().forEach(p => content.innerHTML += `<div><h3>${p.title}</h3><p>${p.text}</p></div>`);
    }
    if(category === 'hall') {
        const pastes = JSON.parse(localStorage.getItem('pastes')||'[]');
        const counts = {};
        pastes.forEach(p => counts[p.title] = (counts[p.title]||0)+1);
        content.innerHTML = '<h2>Hall of Autism</h2>';
        Object.keys(counts).forEach(t => {
            if(counts[t]>=3) {
                const paste = pastes.find(p => p.title===t);
                content.innerHTML += `<div><h3>${t}</h3><p>${paste.text}</p>${paste.image?`<img src="${paste.image}" width="100">`:''}</div>`;
            }
        });
    }
    if(category === 'signIn') {
        content.innerHTML = `
            <h2>Sign In</h2>
            <input id="new-username" placeholder="Username">
            <input id="new-password" placeholder="Password" type="password">
            <input id="new-profile" placeholder="Optional profile image URL">
            <button class="button" onclick="signIn()">Sign In</button>
            <p id="signin-msg"></p>
        `;
    }
    if(category === 'logIn') {
        content.innerHTML = `
            <h2>Log In</h2>
            <input id="login-username" placeholder="Username">
            <input id="login-password" placeholder="Password" type="password">
            <button class="button" onclick="logIn()">Log In</button>
            <p id="login-msg"></p>
        `;
    }
    if(category === 'myAccount') {
        if(!currentUser) { content.innerHTML = '<p>Please log in first.</p>'; return; }
        content.innerHTML = `
            <h2>My Account</h2>
            <p>Username: ${currentUser.username}</p>
            ${currentUser.profile?`<img src="${currentUser.profile}" width="100">`:''}
            <button class="button" onclick="logOut()">Log Out</button>
        `;
    }
}

function publishPaste() {
    const title = document.getElementById('paste-title').value;
    const text = document.getElementById('paste-text').value;
    const image = document.getElementById('paste-image').value;
    if(!title || !text) { document.getElementById('paste-msg').innerText='Title and text required'; return; }
    const pastes = JSON.parse(localStorage.getItem('pastes')||'[]');
    pastes.push({title,text,image});
    localStorage.setItem('pastes',JSON.stringify(pastes));
    document.getElementById('paste-msg').innerText='Paste successfully published';
}

function clearPaste() {
    document.getElementById('paste-title').value='';
    document.getElementById('paste-text').value='';
    document.getElementById('paste-image').value='';
    document.getElementById('paste-msg').innerText='';
}

function signIn() {
    const username = document.getElementById('new-username').value;
    const password = document.getElementById('new-password').value;
    const profile = document.getElementById('new-profile').value;
    let users = JSON.parse(localStorage.getItem('users')||'[]');
    if(users.find(u=>u.username===username)) { document.getElementById('signin-msg').innerText='Account already exists'; return; }
    users.push({username,password,profile});
    localStorage.setItem('users',JSON.stringify(users));
    document.getElementById('signin-msg').innerText='Account created successfully';
}

function logIn() {
    const username = document.getElementById('login-username').value;
    const password = document.getElementById('login-password').value;
    let users = JSON.parse(localStorage.getItem('users')||'[]');
    const user = users.find(u=>u.username===username);
    if(!user) { document.getElementById('login-msg').innerText='Account does not exist'; return; }
    if(user.password!==password) { document.getElementById('login-msg').innerText='Password is incorrect'; return; }
    currentUser = user;
    document.getElementById('signInMenu').style.display='none';
    document.getElementById('logInMenu').style.display='none';
    document.getElementById('myAccountMenu').style.display='block';
    showCategory('myAccount');
}

function logOut() {
    currentUser=null;
    document.getElementById('signInMenu').style.display='block';
    document.getElementById('logInMenu').style.display='block';
    document.getElementById('myAccountMenu').style.display='none';
    showCategory('home');
}

// Initialize home category
showCategory('home');
</script>

</body>
</html>
