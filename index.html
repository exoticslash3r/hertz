<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>N0rb1n</title>
<style>
  body { margin:0; font-family: monospace; background:#0a0a1a; color:#fff; overflow-x:hidden; }
  header { display:flex; align-items:center; justify-content:space-between; background:#111; padding:10px; position:relative; }
  header h1 {
    font-size:28px;
    background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: glow 2s infinite alternate;
    margin:0;
    display:flex;
    align-items:center;
    gap:6px;
  }
  @keyframes glow { from { text-shadow: 0 0 10px #fff; } to { text-shadow: 0 0 30px #fff; } }
  #menuToggle { display:flex; flex-direction:column; cursor:pointer; gap:4px; }
  #menuToggle div { width:25px; height:3px; background:#0ff; }
  #sideMenu { position:fixed; top:0; right:-250px; width:250px; height:100%; background:#222; box-shadow:-2px 0 5px #000; padding:20px; display:flex; flex-direction:column; gap:12px; transition:right 0.3s; z-index:1000; }
  #sideMenu button { background:#111; color:#fff; border:none; padding:10px; border-radius:8px; cursor:pointer; box-shadow:0 0 8px #0ff; }
  #sideMenu button:hover { background:#333; }
  #status { font-size:14px; color:#f00; display:flex; align-items:center; gap:4px; margin-left:20px; }
  .dot { width:10px; height:10px; border-radius:50%; background:red; display:inline-block; }
  main { padding:15px; }
  .hidden { display:none; }
  .chat-box, .friends-box, .messages-box, .paste-box, .home-box, .top-box, .account-box, .recent-box, .login-box, .signin-box { display:none; }
  .active { display:block; }
  .chat-area { border:1px solid #444; padding:10px; max-height:300px; overflow-y:auto; margin-bottom:10px; }
  .chat-msg { margin:5px 0; display:flex; align-items:center; }
  .chat-msg img { width:24px; height:24px; border-radius:50%; margin-right:6px; cursor:pointer; }
  .friend-request { margin:5px 0; }
  input, textarea, select { background:#111; color:#fff; border:1px solid #444; border-radius:6px; padding:5px; }
  .moon-btn { background:#111; color:#fff; border-radius:14px; padding:6px 12px; box-shadow:0 0 8px #0ff; margin-top:5px; cursor:pointer; }
  img.paste-img { max-width:200px; max-height:150px; display:block; margin-top:5px; }
  .error-msg { color:red; margin-top:5px; }
</style>
</head>
<body>
<header>
  <h1>N0rb1n <span class="dot"></span><span id="onlineCount">0</span></h1>
  <div id="menuToggle" onclick="toggleMenu()"><div></div><div></div><div></div></div>
</header>
<div id="sideMenu">
  <button onclick="showPage('home'); toggleMenu()">Home</button>
  <button onclick="showPage('paste'); toggleMenu()">Paste</button>
  <button onclick="showPage('recent'); toggleMenu()">Recent Pastes</button>
  <button onclick="showPage('top'); toggleMenu()">Top Mentions</button>
  <button onclick="showPage('chat'); toggleMenu()">Chat</button>
  <button onclick="showPage('friends'); toggleMenu()">Friends</button>
  <button onclick="showPage('messages'); toggleMenu()">Messages</button>
  <button id="accountBtn" onclick="showPage('account'); toggleMenu()">My Account</button>
  <button id="loginBtn" onclick="showPage('login'); toggleMenu()">Log In</button>
  <button id="signinBtn" onclick="showPage('signin'); toggleMenu()">Sign In</button>
  <hr>
  <div>Device: <span id="deviceType"></span></div>
</div>
<main>
<div id="home" class="home-box active">
  <h2>Welcome Home</h2>
  <input id="search" placeholder="Search titles..." oninput="renderSearch()" />
  <div id="searchResults"></div>
</div>
<div id="paste" class="paste-box">
  <h2>Create Paste</h2>
  <input id="pasteTitle" placeholder="Title" /><br><br>
  <input id="pasteImage" placeholder="Image URL (optional)" /><br><br>
  <textarea id="pasteContent" placeholder="Write your paste here..." rows="5" cols="40"></textarea><br><br>
  <button class="moon-btn" onclick="savePaste()">Save Paste</button>
</div>
<div id="recent" class="recent-box">
  <h2>Recent Pastes</h2>
  <div id="recentPastes"></div>
</div>
<div id="top" class="top-box">
  <h2>Top Mentions</h2>
  <div id="topMentions"></div>
</div>
<div id="chat" class="chat-box">
  <h2>Global Chat</h2>
  <div class="chat-area" id="chatArea"></div>
  <input id="chatInput" placeholder="Type a message..." onkeydown="if(event.key==='Enter') sendChat()" />
  <button class="moon-btn" onclick="sendChat()">Send</button>
</div>
<div id="friends" class="friends-box">
  <h2>Friends</h2>
  <div id="friendRequests"></div>
  <div id="friendList"></div>
</div>
<div id="messages" class="messages-box">
  <h2>Private Messages</h2>
  <div id="privateChats"></div>
  <button class="moon-btn" onclick="startPrivateChat()">Start a private chat</button>
</div>
<div id="account" class="account-box">
  <h2>My Account</h2>
  <div id="accountInfo"></div>
  <input id="newAvatar" placeholder="New Avatar URL" />
  <button class="moon-btn" onclick="changeAvatar()">Change Avatar</button>
  <input id="newPassword" type="password" placeholder="New Password" />
  <button class="moon-btn" onclick="changePassword()">Change Password</button>
  <button class="moon-btn" onclick="logout()">Log Out</button>
  <button class="moon-btn" onclick="deleteAccount()">Delete Account</button>
</div>
<div id="login" class="login-box">
  <h2>Log In</h2>
  <input id="loginUsername" placeholder="Username" /><br><br>
  <input id="loginPassword" type="password" placeholder="Password" /><br><br>
  <button class="moon-btn" onclick="login()">Log In</button>
  <div id="loginError" class="error-msg"></div>
</div>
<div id="signin" class="signin-box">
  <h2>Sign In</h2>
  <input id="signinUsername" placeholder="Username" /><br><br>
  <input id="signinPassword" type="password" placeholder="Password" /><br><br>
  <button class="moon-btn" onclick="signin()">Sign In</button>
  <div id="signinError" class="error-msg"></div>
</div>
<script>
let menuOpen=false;
function toggleMenu(){
  const menu=document.getElementById('sideMenu');
  menuOpen=!menuOpen;
  menu.style.right=menuOpen?'0':'-250px';
}

function detectDevice(){
  let ua=navigator.userAgent;
  if(/Android/.test(ua)) return 'Android';
  if(/iPhone|iPad|iPod/.test(ua)) return 'iOS';
  if(/VM/.test(ua)) return 'VM';
  return 'Desktop';
}
document.getElementById('deviceType').innerText=detectDevice();

let currentUser = localStorage.getItem('currentUser');
let friends = currentUser ? JSON.parse(localStorage.getItem(currentUser+'_friends')||'[]') : [];
let requests = currentUser ? JSON.parse(localStorage.getItem(currentUser+'_requests')||'[]') : [];
let messages = currentUser ? JSON.parse(localStorage.getItem(currentUser+'_messages')||'{}') : {};

if(currentUser){ document.getElementById('loginBtn').style.display='none'; document.getElementById('signinBtn').style.display='none'; }

function login(){
  let u=document.getElementById('loginUsername').value;
  let p=document.getElementById('loginPassword').value;
  let pass=localStorage.getItem(u+'_password');
  if(!pass){ document.getElementById('loginError').innerText='Account does not exist'; return; }
  if(pass!==p){ document.getElementById('loginError').innerText='Password is incorrect'; return; }
  localStorage.setItem('currentUser',u);
  location.reload();
}

function signin(){
  let u=document.getElementById('signinUsername').value;
  let p=document.getElementById('signinPassword').value;
  if(localStorage.getItem(u+'_password')){ document.getElementById('signinError').innerText='Account already exists'; return; }
  localStorage.setItem(u+'_password',p);
  localStorage.setItem('currentUser',u);
  location.reload();
}

// All other functions (showPage, savePaste, renderRecent, renderTop, renderFriends, acceptFriend, denyFriend, renderMessages, openChat, sendPM, renderPM, startPrivateChat, updateStatus, renderAccount, changeAvatar, changePassword, logout, deleteAccount, renderSearch) remain as before.

setInterval(updateStatus,2000);
updateStatus();
</script>
</body>
</html>
